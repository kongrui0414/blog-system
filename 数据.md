接口规范

同一返回格式

```
{
    "status": 200,
	"code": 1,
	"msg":"xxxx成功",
	"data":{}
}
```

| 字段名 |   名称   |                 说明                  |                             其他                             |
| :----: | :------: | :-----------------------------------: | :----------------------------------------------------------: |
| status |  状态码  |              http状态码               |        200操作成功<br />403被拦截<br />500服务器错误         |
|  code  |  请求码  |             操作的状态码              | 1表示成功<br />0表示未登录<br />-1表示查询对象不存在<br />-2表示参数有误<br />后续可根据具体情况定义 |
|  msg   | 返回消息 | 对某个操作的返回信息，可用于前端alter |                  ‘xxx成功’<br />‘xxxx失败’                   |
|  data  | 返回数据 |      返回的具体数据，可能为null       |                      数据格式需求自定义                      |

---

【需求】用户登录

【请求方式】POST

【URL】/user/login

【参数】user_id（string）password（string）

【说明】成功后返回用户ID

【返回】：

| code |              msg              |
| :--: | :---------------------------: |
|  1   |           登录成功            |
|  -1  | 该用户不存在/密码有误，请重试 |

```json
{
    "data": {
        "user_id": ""
  }
}
```

---

【需求】用户注册

【请求方式】POST

【URL】/user/register

【参数】user_name（string）password（string）e-mail(string) nick_name(string)

【说明】user_id 后端生成，user_name唯一，nick_name不唯一

【返回】

| code |      msg       |
| :--: | :------------: |
|  1   |    注册成功    |
|  -3  | 该用户已被注册 |

```json
{
    "data": {
        "user_id": "",
        "user_name": "",
        "nick_name": "",      
        "personal_introduction": "",
        "e_mail": "",
        "article": [article_id],     
        "collection": [article_id],
        "attention": [user_id],
        "like_times": [{      //获赞次数
            "article_id": "",  
            "like_times": 500
        }]
  }
}
```

---

【需求】用户退出登录

【请求方式】DELETE

【URL】/user/logout

【参数】

【说明】通过删除session完成退出登录

【返回】

| code |           msg           |
| :--: | :---------------------: |
|  1   | 退出登录成功/已退出登录 |
|  -3  |      退出登录失败       |

```json
{
  "data": {}
}
```

---

【需求】获取博客

【请求方式】GET

【URL】/article/hot/{tag}

​			/article/new/{tag}

​			/article/attention/user_id/{tag}

【参数】

【说明】hot 获取热门博客列表排序

​				new 获取最新博客列表，按照time排序，最新的在前面

​				attention/user_id 用户关注的博主的文章

​				tag 分类标签，为空默认返回全部

【返回】

| code |       msg       |
| :--: | :-------------: |
|  1   | 获取article成功 |
|  -1  | 获取article失败 |

```json
{
  "data": [{
        "article_id": "",
        "article_title": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }]
}
```

---

【需求】获取个人信息

【请求方式】GET

【URL】/user/{user_id}

【参数】user_id(string)

【说明】获取个人信息

【返回】

| code |     msg      |
| :--: | :----------: |
|  1   | 获取user成功 |
|  -1  | 获取user失败 |

```json
{
    "data": {
        "user_id": "",
        "user_name": "",
        "nick_name": "",
        "personal_introduction": "",
        "e_mail": "",
        "article": [article_id],
        "collection": [article_id],
        "attention": [user_id],
        "like_times": [{
            "article_id": "",
            "like_times": 500
        }]
  }
}
```

---

【需求】获取个人博客列表

【请求方式】GET

【URL】/user/article/{user_id}

【参数】user_id(string)

【说明】获取个人博客列表

【返回】

| code |       msg       |
| :--: | :-------------: |
|  1   | 获取article成功 |
|  -1  | 获取article失败 |



```json
{
  "data": [{
        "article_id": "",
        "article_title": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }]
}
```

---

【需求】管理员登录

【请求方式】POST

【URL】/admin/login

【参数】admin_name（string）password（string）

【说明】

【返回】

| code |              msg              |
| :--: | :---------------------------: |
|  1   |           登录成功            |
|  -1  | 该用户不存在/密码有误，请重试 |

```json
{
    "data": {}
}
```

---

【需求】获取网站公告

【请求方式】GET

【URL】/announcement

【参数】

【说明】

【返回】

| code |         msg          |
| :--: | :------------------: |
|  1   | 获取announcement成功 |
|  -1  | 获取announcement失败 |

```json
{
    "data": {
       "announcement": "" 
    }
}
```

---

【需求】搜索

【请求方式】GET

【URL】/search/{category}/{str}

【参数】category(string) str(string)

【说明】category 是分类搜索参数，str是搜索内容

【返回】

| code |   msg    |
| :--: | :------: |
|  1   | 搜索成功 |
|  -1  | 搜索失败 |

```json
{
    "data": [{
        "article_id": "",
        "article_title": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }]
}
```

---

【需求】获取博客内容

【请求方式】GET

【URL】/article/{article_id}

【参数】article_id(string)

【说明】

【返回】

| code |       msg       |
| :--: | :-------------: |
|  1   | 获取article成功 |
|  -1  | 获取article失败 |

```json
{
    "data": {
        "articleId": "",
        "articleTitle": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }
}
```

---

【需求】获取评论

【请求方式】GET

【URL】/article/{article_id}/comment

【参数】article_id(string)

【说明】

【返回】

| code |       msg       |
| :--: | :-------------: |
|  1   | 获取comment成功 |
|  -1  | 获取comment失败 |

```json
{
    "data": [{
	"articleId": "",
	"commentId": "",
	"p_id": "",
	"date": Date,
	"content": "",
	"user_id": "",
	"reply": [{
        "articleId": "",
        "commentId": "",
        "p_id": "",
        "date": Date,
        "content": "",
        "user_id": "",
        "reply" : []
    	}]
	}]
}
```

---

【需求】添加评论

【请求方式】POST

【URL】/article/{article_id}/addcomment

【参数】article_id(string)  p_id(string) date(string) content(string) user_id(string) 

【说明】comment_id由后端生成

【返回】

| code |       msg       |
| :--: | :-------------: |
|  1   | 获取comment成功 |
|  -1  | 获取comment失败 |

```json
{
    "data": [{
	"articleId": "",
	"commentId": "",
	"p_id": "",
	"date": "",
	"content": "",
	"user_id": "",
	"reply": []
	}]
}
```

---

【需求】修改评论

【请求方式】POST

【URL】/article/{article_id}/updatecomment

【参数】  commentId(string) content(string) 

【说明】

【返回】

| code |       msg       |
| :--: | :-------------: |
|  1   | 修改comment成功 |
|  -1  | 修改comment失败 |

```json
{
    "data": [{
	"articleId": "",
	"commentId": "",
	"p_id": "",
	"date": "",
	"content": "",
	"user_id": "",
	"reply": []
	}]
}
```

---

【需求】删除评论

【请求方式】DELETE

【URL】/article/{article_id}/deletecomment

【参数】  commentId(string) 

【说明】

【返回】

| code |       msg       |
| :--: | :-------------: |
|  1   | 删除comment成功 |
|  -1  | 删除comment失败 |

```json
{
    "data": ""
}
```

---

【需求】点赞

【请求方式】POST

【URL】/article/{article_id}/addlike

【参数】 commentId(string)  user_id(string)

【说明】点赞后，点赞数+1，用户点赞

【返回】

| code |   msg    |
| :--: | :------: |
|  1   | 点赞成功 |
|  -1  | 点赞失败 |

```json
{
    "data": {
        "articleId": "",
        "articleTitle": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }
}
```

---

【需求】取消点赞

【请求方式】POST

【URL】/article/{article_id}/cancellike

【参数】 commentId(string)  user_id(string)

【说明】取消点赞后，点赞数-1

【返回】

| code |     msg      |
| :--: | :----------: |
|  1   | 取消点赞成功 |
|  -1  | 取消点赞失败 |

```json
{
    "data": {
        "articleId": "",
        "articleTitle": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }
}
```

---

【需求】删除用户

【请求方式】POST

【URL】/admin/deleteuser

【参数】user_id(string)

【说明】

【返回】

| code |     msg      |
| :--: | :----------: |
|  1   | 删除用户成功 |
|  -1  | 删除用户失败 |

```json
{
    "data": {}
}
```

---

【需求】博客审核

【请求方式】POST

【URL】/admin/audit

【参数】article_id(string) auditstatus(string) 

【说明】auditstatus是审核结果

【返回】

| code |     msg      |
| :--: | :----------: |
|  1   | 文章审核成功 |
|  -1  | 文章审核失败 |

```json
{
    "data": {
        "articleId": "",
        "articleTitle": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""   //状态，是否审核通过
    }
}
```

---

【需求】删除博客

【请求方式】DELETE

【URL】/{article_id}/delete

【参数】article_id(string) 

【说明】

【返回】

| code |     msg      |
| :--: | :----------: |
|  1   | 文章删除成功 |
|  -1  | 文章删除失败 |

```json
{
    "data": {}
}
```

---

【需求】修改博客

【请求方式】POST

【URL】/{article_id}/update

【参数】article_id(string)  content(string) abstract(string) article_title(string) tag([string])

【说明】

【返回】

| code |     msg      |
| :--: | :----------: |
|  1   | 文章修改成功 |
|  -1  | 文章修改失败 |

```json
{
    "data": {
        "article_id": "",
        "article_title": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }
}
```

---

【需求】添加博客

【请求方式】POST

【URL】/addarticle

【参数】user_id(string) article_title(string) publish_time(string) abstract(string) tag([string])

【说明】article_id由后端生成，data内容初始均为0

【返回】

| code |     msg      |
| :--: | :----------: |
|  1   | 文章添加成功 |
|  -1  | 文章添加失败 |

```json
{
    "data": {
        "article_id": "",
        "article_title": "",
        "author": "",
        "publish_time": "",
        "abstract": "",
        "content": "",
        "tag": [String],
        "data": {
            "comment": Number,
            "watch": Number,
            "like": Number
        },
        "status": ""
    }
}
```

---

